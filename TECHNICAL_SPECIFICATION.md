# Техническое задание: Расширение CommentCorrector для VS Code

## 1. Общее описание

**Название проекта:** CommentCorrector  
**Тип:** Расширение для Visual Studio Code  
**Назначение:** Автоматическая коррекция и классификация комментариев в коде для приведения их к формальному корпоративному стилю.

## 2. Цель проекта

Создать инструмент, который:
- Анализирует комментарии в исходном коде
- Классифицирует их по стилю (формальный/неформальный)
- Автоматически исправляет неформальные комментарии, удаляя сленг, эмоциональные оценки и разговорные выражения
- Визуально выделяет комментарии в зависимости от их стиля

## 3. Функциональные требования

### 3.1. Основные функции

**3.1.1. Коррекция комментариев**
- Команда: `commentcorrector.CorrectComments`
- Функциональность: Поиск всех комментариев в активном файле и замена неформальных комментариев на формальные эквиваленты
- Требования к коррекции:
  - Сохранение исходного языка комментария
  - Сохранение технической сути
  - Удаление неформальной лексики, эмоциональных оценок

**3.1.2. Подсветка комментариев**
- Команда: `commentcorrector.HighlightComments`
- Функциональность: Классификация всех комментариев в активном файле и визуальное выделение:
  - Зелёный цвет — формальные комментарии
  - Красный цвет — неформальные комментарии
  - Жёлтый цвет — комментарии с неопределённой классификацией

**3.1.3. Отключение подсветки**
- Команда: `commentcorrector.DisableHighlight`
- Функциональность: Сброс всех активных выделений комментариев

### 3.2. Поддерживаемые языки программирования

- JavaScript/TypeScript (`//`)
- Java (`//`)
- C# (`//`)
- C++ (`//`)
- Python (`#`)
- CSS/SCSS (`/*`)
- HTML (`<!--`)

## 4. Технические требования

### 4.1. Технологический стек

- **Язык:** TypeScript
- **Платформа:** VS Code Extension API
- **Зависимости:**
  - `openai` — клиент для работы с LLM API
  - `dotenv` — загрузка переменных окружения

### 4.2. Интеграция с LLM

- Использование OpenAI-совместимого API для обработки комментариев
- Настройка через переменные окружения:
  - `API_URL` — базовый URL API
  - `API_KEY` — ключ доступа к API
  - `MODEL_NAME` — имя используемой модели
- Два типа промптов:
  - `format_prompt` — для коррекции комментариев
  - `classify_prompt` — для классификации стиля

### 4.3. Обработка ошибок

- Уведомления пользователя о частичных сбоях
- Продолжение работы при ошибках отдельных комментариев

## 5. Пользовательский интерфейс

### 5.1. Команды

Все команды доступны через Command Palette (`Cmd/Ctrl + Shift + P`):
- "Исправить некорректные комментарии"
- "Выделить корректные/некорректные комментарии цветом"
- "Отменить выделение комментариев цветом"

### 5.2. Визуальная обратная связь

- Всплывающие уведомления о статусе операций
- Цветовая подсветка комментариев в редакторе


## 6. Требования к окружению

- VS Code версии `1.105.0` или выше
- Node.js версии `18+`
- Файл `.env` с настройками API в корне расширения

## 7. Ограничения

- Поддержка только однострочных комментариев
- Зависимость от доступности внешнего LLM API

## 8. Критерии качества

- Корректная обработка комментариев без изменения кода
- Сохранение технической сути комментариев при коррекции
- Информативные сообщения об ошибках

